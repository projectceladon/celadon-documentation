

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Submit your patches &mdash; Documentation for the Celadon Project</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Host OS Hardening" href="host-os-hardening.html" />
    <link rel="prev" title="Run Celadon on Intel Platforms" href="on-bm.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Celadon Project
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="getting-started.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="as-service.html">Run Project Celadon on Intel® architectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="naming-convention.html">Release Naming Convention</a></li>
<li class="toctree-l2"><a class="reference internal" href="build-source.html">Build Celadon From Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="on-bm.html">Run Celadon on Intel Platforms</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Submit your patches</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#c-github-manifest-structure">Celadon GitHub Manifest Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-branching-strategy">Celadon Branching Strategy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#submit-patches">Submit Patches</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submit-aosp-patches">Submit AOSP Patches</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="host-os-hardening.html">Host OS Hardening</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-to.html">How do I …</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">Guides and Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stable-release_iot/stable-release_iot.html">Stable Releases IoT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Celadon Project</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="getting-started.html">Getting Started</a> &raquo;</li>
        
      <li>Submit your patches</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/getting-started/submit-patch.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="submit-your-patches">
<span id="submit-patch"></span><h1>Submit your patches</h1>
<p>Celadon uses <a class="reference external" href="https://help.github.com/articles/about-pull-requests/">GitHub Pull-Requests</a> (PR) to submit and review code submissions. You are required to be aware of the software repository and branch in the Celadon source tree where your code is contibuted before submitting any changes.</p>
<div class="section" id="c-github-manifest-structure">
<h2>Celadon GitHub Manifest Structure</h2>
<p>Celadon source code consists of multiple repositories (i.e. “<strong>projects</strong>”), the manifest file <em>.repo/manifests/default.xml</em> contains the information needed (i.e. “<strong>remotes</strong>”) to fetch those repositories. It includes the following files to instruct the <code class="docutils literal"><span class="pre">repo</span></code> command to compose the Celadon source tree:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>include/aosp_vanilla.xml</td>
<td>This is vanilla AOSP code based on
<cite>refs/tags/android-10.0.0_rN</cite> for CiV builds</td>
</tr>
<tr class="row-even"><td>include/remove-android_ia.xml</td>
<td>The repositories to be removed from the AOSP code</td>
</tr>
<tr class="row-odd"><td>include/bsp-celadon.xml</td>
<td>The BSP source code customized for Celadon</td>
</tr>
</tbody>
</table>
<p>To get the <strong>remote</strong> in order to upload code, use the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git remote -v
</pre></div>
</div>
<p>The following table lists the <em>remote</em> aliases supported by Celadon:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>github</td>
<td>Good-to-go with the GitHub PR push process</td>
</tr>
<tr class="row-even"><td>aosp</td>
<td>Create a google_diff patch &amp; in-parallel
up-stream to aosp</td>
</tr>
<tr class="row-odd"><td>kernelorg</td>
<td>Upstream to kernel.org</td>
</tr>
<tr class="row-even"><td>graphics</td>
<td>Upstream to graphics remote</td>
</tr>
<tr class="row-odd"><td>intel</td>
<td>Upstream to intel remote</td>
</tr>
<tr class="row-even"><td>trusty-ia</td>
<td>Upstream to trusty-ia remote</td>
</tr>
</tbody>
</table>
<p>Further, you can enter the following commands to identify which branch the source head points to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git remote show &lt;remote-alias&gt; <span class="p">|</span> grep <span class="s1">&#39;HEAD branch:&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="c-branching-strategy">
<h2>Celadon Branching Strategy</h2>
<p>There is a <em>master branch</em> and <em>stable branch</em> for some of Celadon repositories. Make developer changes on the master branch. The CoE (i.e. Center of Excellence) lead of the repo pulls them from the master branch to the stable branch once it is stabilized. Please review the manifest include file <em>.repo/manifests/include/bsp-celadon.xml</em>, which tells the branch info that the project source code is branched off. For example, the source code of the <em>art-extenstion</em> project and <em>trusty</em> projects are based on the stable branch and master branch respectively:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>...
&lt;project <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;vendor_intel_art-extension&quot;</span> <span class="nv">path</span><span class="o">=</span><span class="s2">&quot;vendor/intel/art-extension&quot;</span> <span class="nv">remote</span><span class="o">=</span><span class="s2">&quot;github&quot;</span> <span class="nv">revision</span><span class="o">=</span><span class="s2">&quot;stable&quot;</span>/&gt;
...
&lt;project <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;trusty_external_headers&quot;</span> <span class="nv">path</span><span class="o">=</span><span class="s2">&quot;trusty/external/headers&quot;</span> <span class="nv">remote</span><span class="o">=</span><span class="s2">&quot;trusty-ia&quot;</span> <span class="nv">revision</span><span class="o">=</span><span class="s2">&quot;master&quot;</span>/&gt;
&lt;project <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;trusty_external_lk&quot;</span> <span class="nv">path</span><span class="o">=</span><span class="s2">&quot;trusty/external/lk&quot;</span>  <span class="nv">remote</span><span class="o">=</span><span class="s2">&quot;trusty-ia&quot;</span> <span class="nv">revision</span><span class="o">=</span><span class="s2">&quot;master&quot;</span>&gt;
...
</pre></div>
</div>
</div>
<div class="section" id="submit-patches">
<h2>Submit Patches</h2>
<p>Once you determine which remote repository to fetch the original source code from and which branch the software has branched off of, you can set up a local workspace. Do this by <a class="reference external" href="https://help.github.com/articles/fork-a-repo">cloning the source repository</a> on your computer. If you would like to propose changes to any non-AOSP project repository, <a class="reference external" href="https://help.github.com/articles/creating-a-pull-request-from-a-fork">create a Pull Request</a>, and send the URL of the PR to the domain owners for review. You may revise and <a class="reference external" href="https://help.github.com/articles/changing-a-commit-message">update the submitted PRs</a> to address any review feedback from the domain owners.</p>
<p>We recommend you create commit messages in the following format when you submit your code to Celadon:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[CELADON] &lt;One Line Summary&gt;

&lt;Description&gt;

Tracked-On:
Signed-off:
</pre></div>
</div>
<div class="section" id="submit-aosp-patches">
<h3>Submit AOSP Patches</h3>
<p>Patches against the AOSP project source code use a different approach. Complete the following steps to create your <em>google_diff</em> patch set to make any changes on an AOSP project.</p>
<ol class="arabic">
<li><p class="first">Clone the AOSP project to your local workspace. Make your changes and create your commit messages in the workspace.</p>
</li>
<li><p class="first">Generate the patch set using the following command, where <em>n</em> is the number of commits added in the previous step.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ git format-patch HEAD~&lt;n&gt;
</pre></div>
</div>
</li>
<li><p class="first">Copy the patch files generated in the previous step to the <em>vendor/intel/utils/aosp_diff/</em> folder in the Celadon source tree according to the following guidelines. Maintain the patch number in sequence and create the previous folder if it does not exist.</p>
<blockquote>
<div><ul>
<li><p class="first">If the patch file is to make changes to the following areas in the common AOSP code (i.e. applicable to all hardware and no product dependency), move the patch file to the ‘vendor/intel/utils/aosp_diff/<strong>preliminary</strong>/’ folder.</p>
<blockquote>
<div><ol class="arabic simple">
<li>Patches for CTS/VTS</li>
<li>Patches for AOSP build</li>
<li>Patches for AOSP major feature enabling</li>
<li>Patches proposed by COE for upstream</li>
</ol>
</div></blockquote>
</li>
<li><p class="first">Otherwise, move the patch file to the ‘vendor/intel/utils/aosp_diff/<strong>&lt;target_product&gt;</strong>/’ folder.</p>
</li>
</ul>
</div></blockquote>
</li>
</ol>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="host-os-hardening.html" class="btn btn-neutral float-right" title="Host OS Hardening" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="on-bm.html" class="btn btn-neutral" title="Run Celadon on Intel Platforms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, BSD, MIT, Apache and GPL licenses.
      Last updated on Nov 30, 2022.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>