

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>User Guide &mdash; Documentation for the Celadon Project</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Android 11 Stable Releases IoT" href="android-11.html" />
    <link rel="prev" title="Feature Delta Offered by Stable Releases (IoT)" href="feature-delta-iot-a12.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Celadon Project
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started/getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">Guides and Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="stable-release_iot.html">Stable Releases IoT</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="android-12.html">Android 12 Stable Releases IoT</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="feature-delta-iot-a12.html">Feature Delta Offered by Stable Releases (IoT)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">User Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#system-requirements">System Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-install-this-release">How to install this release</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dut-setup">DUT setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#host-setup">Host setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setup-the-host-os-for-sriov">Setup the Host OS for SRIOV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#android-guest-vm-setup">Android Guest VM Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-android-12">Running Android 12</a></li>
<li class="toctree-l4"><a class="reference internal" href="#guest-vm-configuration-options">Guest VM Configuration Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#acronyms-and-terms">Acronyms and terms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#helpful-hints-related-documents">Helpful hints / related documents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="android-11.html">Android 11 Stable Releases IoT</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Celadon Project</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="stable-release_iot.html">Stable Releases IoT</a> &raquo;</li>
        
          <li><a href="android-12.html">Android 12 Stable Releases IoT</a> &raquo;</li>
        
      <li>User Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/stable-release_iot/user-guide-a12.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="user-guide">
<span id="user-guide-a12"></span><h1>User Guide</h1>
<div class="section" id="system-requirements">
<h2>System Requirements</h2>
<p>Recommended system requirements for Host:</p>
<ul class="simple">
<li>CPU: 4 cores or more</li>
<li>RAM: 8 GB or more</li>
<li>Hard-Disk: 500 GB</li>
</ul>
</div>
<div class="section" id="how-to-install-this-release">
<h2>How to install this release</h2>
<div class="section" id="celadon-build-steps">
<h3>Celadon build steps</h3>
<p>Follow the development environment set up instructions in
<a class="reference external" href="https://docs.01.org/celadon/getting-started/build-source.html#set-up-the-development-environment">https://docs.01.org/celadon/getting-started/build-source.html#set-up-the-development-environment</a> for Celadon build host setup.</p>
<p>Manifest Link: <a class="reference external" href="https://github.com/projectceladon/manifest/blob/master/stable-build/CIV_02.22.04.50_A12.xml">https://github.com/projectceladon/manifest/blob/master/stable-build/CIV_02.22.04.50_A12.xml</a></p>
<p>Prerequisites and host kernel build steps:</p>
<p>Prerequisites</p>
<ul class="simple">
<li>Install Ubuntu 18.04 LTS</li>
<li>If operating behind a corporate firewall, setup the proxy
settings</li>
<li>Install the following packages</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo apt install -y git fakeroot build-essential ncurses-dev xz-utils libssl-dev bc flex libelf-dev bison rsync kmod cpio
</pre></div>
</div>
</div>
<div class="section" id="host-kernel-build-steps">
<h3>Host kernel build steps</h3>
<p>Requirement:</p>
<ul class="simple">
<li>x86_64_defconfig [Make sure downloaded file is not html]
Defconfig_link: <a class="reference external" href="https://github.com/projectceladon/vendor-intel-utils-vertical-iot/blob/main/x86_64_defconfig">https://github.com/projectceladon/vendor-intel-utils-vertical-iot/blob/main/x86_64_defconfig</a></li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Sync kernel</span>
<span class="c1"># Note that this will pick up the latest on the branch</span>
$ git clone https://github.com/intel/linux-intel-lts.git

<span class="c1"># Change directory</span>
$ <span class="nb">cd</span> linux-intel-lts

<span class="c1"># Checkout to  specific commit (Refer to release notes for SHA ID)</span>
$ git checkout lts-v5.15.71-adl-linux-221121T044440Z

$ cp x86_64_defconfig .config
$ <span class="nb">echo</span> <span class="s2">&quot;&quot;</span><span class="p">|</span> make <span class="nv">ARCH</span><span class="o">=</span>x86_64 olddefconfig

<span class="c1"># Make kernel debian package</span>
$ make <span class="nv">ARCH</span><span class="o">=</span>x86_64 -j16 <span class="nv">LOCALVERSION</span><span class="o">=</span>-lts2021-iotg bindeb-pkg

<span class="c1"># To find output files</span>
$ find .. -name <span class="s2">&quot;*.deb&quot;</span>
../linux-image-5.15.71-lts2021-iotg-dbg_5.15.71-lts2021-iotg-1_amd64.deb
../linux-headers-5.15.71-lts2021-iotg_5.15.71-lts2021-iotg-1_amd64.deb
../linux-image-5.15.71-lts2021-iotg_5.15.71-lts2021-iotg-1_amd64.deb
../linux-libc-dev_5.15.71-lts2021-iotg-1_amd64.deb

<span class="c1"># Copy built .deb packages to use during Installing Ubuntu host kernel</span>
$ <span class="nb">cd</span> ..
$ cp *.deb &lt;target path&gt;
</pre></div>
</div>
<p>For Celadon Host OS hardening recommendations see:
<a class="reference external" href="https://github.com/projectceladon/celadon-documentation/blob/master/source/getting-started/host-os-hardening.rst">https://github.com/projectceladon/celadon-documentation/blob/master/source/getting-started/host-os-hardening.rst</a></p>
</div>
<div class="section" id="build-celadon-from-source">
<h3>Build Celadon from Source</h3>
<p>Celadon Source Requirements:</p>
<ul class="simple">
<li>CIV_02.22.04.50_A12.xml</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Create symbolic link for Python if not already exists in ‘/usr/bin’ directory</span>
$ sudo ln -s /usr/bin/python3 /usr/bin/python
</pre></div>
</div>
<p>Steps to sync to this release:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Init with the default manifest</span>
$ mkdir &lt;build_workspace&gt;
$ <span class="nb">cd</span> &lt;build_workspace&gt;
$ repo init -u https://github.com/projectceladon/manifest.git

<span class="c1"># Copy the CIV manifest and use it</span>
$ cp &lt;<span class="nb">source</span> path&gt;/CIV_02.22.04.50_A12.xml .repo/manifests/
$ repo init -u https://github.com/projectceladon/manifest.git -m CIV_02.22.04.50_A12.xml
<span class="c1">#NOTE : Manifest tag will change according to the latest release</span>

<span class="c1"># Sync the code</span>
$ repo sync -c -q -j<span class="si">${</span><span class="nv">nproc</span><span class="si">}</span>
$ repo <span class="k">for</span> all -c git lfs pull
</pre></div>
</div>
<p>Step to generate the Android-CIV* Image:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Perform the environment setup from directory where repo is initialized</span>
$ <span class="nb">source</span> build/envsetup.sh

<span class="c1"># Select userdebug variant</span>
$ lunch caas-userdebug

<span class="c1"># Start the build</span>
$ make flashfiles <span class="nv">BASE_LTS2020_YOCTO_KERNEL</span><span class="o">=</span><span class="nb">true</span> -j <span class="k">$(</span>nproc<span class="k">)</span>


<span class="c1"># Build output (CIV flashfiles)</span>
$ find out/target/product/caas/ -name caas-releasefiles-*.zip
out/target/product/caas/caas-releasefiles-xxxxx.zip
</pre></div>
</div>
<p>Change to the ADL target directory and copy caas-releasefiles-userdebug.tar.gz to the target director</p>
</div>
</div>
<div class="section" id="dut-setup">
<h2>DUT setup</h2>
<p>Hardware details:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>HW Alder Lake (ADL) DUT details</dt>
<dd><ul class="first last">
<li>For ADL RVP DDR5 C1 CPU</li>
<li>BIOS Version ADLSFWI1.R00.3225.B00.2205270548</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Every type of Guest VM configuration has a minimum required number of assigned cores/vCPUs.
Not meeting minimum cores requirement will result in degraded performance</p>
</div>
<p>BIOS setting:</p>
<ul class="simple">
<li>Intel®(VMX) Virtualization Technology (Intel® VT)<ul>
<li>Settings: Intel Advance Menu-&gt; CPU Configurations
Intel (VMX) Virtualization: Enabled</li>
</ul>
</li>
<li>Intel® Virtualization Technology (Intel® VT) for<ul>
<li>Settings: Intel Advance Menu-&gt; System Agent (SA) Configuration
VT-d: Enabled</li>
</ul>
</li>
<li>SRIOV Enable<ul>
<li>Settings: Intel Advance Menu-&gt; System Agent (SA) Configuration -
Graphics Configuration: Enabled</li>
</ul>
</li>
<li>Intel(R) TCC Mode<ul>
<li>Settings: Intel Advance Menu-&gt; Intel(R) Time Coordinated Computing
TCC: Disabled</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The menu structure may differ due to BIOS differences</p>
</div>
</div>
<div class="section" id="host-setup">
<h2>Host setup</h2>
<p>Prerequisites:</p>
<p>Install Ubuntu 22.04 LTS:</p>
<ul class="simple">
<li>Download and install the Ubuntu 22.04 LTS from the official Ubuntu
website: <a class="reference external" href="https://www.releases.ubuntu.com/22.04/ubuntu-22.04.1-desktop-amd64.iso">https://www.releases.ubuntu.com/22.04/ubuntu-22.04.1-desktop-amd64.iso</a></li>
<li>If operating behind a corporate firewall, setup the proxy settings</li>
</ul>
<p>Installation Scripts Required:</p>
<ul class="simple">
<li>sriov_patches.zip</li>
<li>ubuntu_kvm_multios_scripts.zip
From release package ADL link:
<a class="reference external" href="https://www.intel.com/content/www/us/en/secure/design/confidential/software-kits/kit-details.html?kitId=757435&amp;s=Newest">https://www.intel.com/content/www/us/en/secure/design/confidential/software-kits/kit-details.html?kitId=757435&amp;s=Newest</a></li>
</ul>
<p>Setup Ubuntu host:</p>
<ul class="simple">
<li>Set the default download server to “Main server” in “Software &amp; Updates”
GUI</li>
<li>Go to Applications and launch “Software &amp; Updates”, and in “Ubuntu
Software” tab, select Download from: “Main server”</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">SRIOV related content available under NDA</p>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Reboot into the Ubuntu host image</span>
<span class="c1"># Change directory</span>
$ <span class="nb">cd</span> ~

<span class="c1"># Please use these commands to update and upgrade the Ubuntu with the latest software packages.</span>
$ sudo apt -y update
$ sudo apt -y upgrade

<span class="c1"># Reboot the system</span>
$ sudo reboot now

<span class="c1"># Copy the artifact</span>
$ <span class="nb">cd</span> &lt;workspace&gt;
$ cp &lt;<span class="nb">source</span> path&gt;/sriov_patches.zip .
$ cp &lt;<span class="nb">source</span> path&gt;/ubuntu_kvm_multios_scripts.zip .

<span class="c1"># Extract files</span>
$ unzip sriov_patches.zip
$ unzip -jo ubuntu_kvm_multios_scripts.zip


<span class="c1"># This will install kernel and firmware, and update grub</span>
<span class="c1"># Copy .deb package generated in Host kernel build steps above</span>
<span class="c1"># If prompted, answer y to go ahead with changes</span>
$ sudo ./sriov_setup_kernel.sh

<span class="c1"># After rebooting, check that the kernel is the installed version.</span>
$ uname -r
<span class="m">5</span>.15.71-lts2021-iotg
</pre></div>
</div>
</div>
<div class="section" id="setup-the-host-os-for-sriov">
<h2>Setup the Host OS for SRIOV</h2>
<p>Perform the setup for Ubuntu OS. Please unzip to <code class="docutils literal"><span class="pre">&lt;workspace&gt;</span></code> directory</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># If prompted, answer y to go ahead with changes</span>
$ sudo ./sriov_setup_ubuntu.sh

<span class="c1"># Check if Host OS is running in SR-IOV PF mode</span>
$ dmesg <span class="p">|</span> grep SR-IOV
        i915 <span class="m">0000</span>:00:02.0: Running in SR-IOV PF mode
<span class="c1"># Check Host OS GuC and HuC Firmware Version</span>
$ dmesg <span class="p">|</span> grep GuC
        i915 <span class="m">0000</span>:00:02.0: <span class="o">[</span>drm<span class="o">]</span> GuC firmware i915/tgl_guc_70.bin version <span class="m">70</span>.5.1
        i915 <span class="m">0000</span>:00:02.0: <span class="o">[</span>drm<span class="o">]</span> GuC submission enabled
$ dmesg <span class="p">|</span> grep HuC
        i915 <span class="m">0000</span>:00:02.0: <span class="o">[</span>drm<span class="o">]</span> HuC firmware i915/tgl_huc.bin version <span class="m">7</span>.9.3
        i915 <span class="m">0000</span>:00:02.0: <span class="o">[</span>drm<span class="o">]</span> HuC authenticated
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If need to run any reliability or benchmark test,
please run the commands below to disable auto suspend and hibernate on Ubuntu host</p>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Disable suspend and hibernate service</span>
$ sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target

<span class="c1"># Reboot Ubuntu host</span>
$ sudo reboot now
</pre></div>
</div>
</div>
<div class="section" id="android-guest-vm-setup">
<h2>Android Guest VM Setup</h2>
<p>Follow the development environment set up instructions in
<a class="reference external" href="https://docs.01.org/celadon/getting-started/build-source.html#set-up-the-development-environment">https://docs.01.org/celadon/getting-started/build-source.html#set-up-the-development-environment</a> for Celadon build host setup.</p>
<p>Users of Celadon-in-VM (CIV) release must ensure that Celadon platform host OS hardening measures are in place to ensure that the host OS could be treated as part of the secure computing base. This is essential to ensuring CIV security could be trusted in CIV operations.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Copy the artifact</span>
$ cp caas-releasefiles-userdebug.tar.gz &lt;workspace&gt;

<span class="c1"># Extract files</span>
$ <span class="nb">cd</span> &lt;workspace&gt;
$ tar xzvf caas-releasefiles-userdebug.tar.gz

<span class="c1"># Prepare setup_host.sh</span>
$ chmod +x ./scripts/setup_host.sh
<span class="c1"># Update the host</span>
<span class="c1"># If prompted, answer ‘Y’ for all options to go ahead with changes</span>
$ sudo -E ./scripts/setup_host.sh
</pre></div>
</div>
<div class="section" id="create-android-vm-image">
<h3>Create Android VM Image</h3>
<p>Create Android CIV image for running as VM in ADL target</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Change directory</span>
$ <span class="nb">cd</span> &lt;workspace&gt;
<span class="c1"># Generate CIV disk image from caas-flashfiles.</span>
<span class="c1"># The script and flashfiles have already been extracted from caas-releasefiles-userdebug.tar.gz</span>
<span class="c1"># Wait for &quot;Flashing is completed&quot; msg from script.</span>
$ sudo -E ./scripts/start_flash_usb.sh caas-flashfiles-&lt;xxxxx&gt;.zip --display-off
</pre></div>
</div>
</div>
</div>
<div class="section" id="running-android-12">
<h2>Running Android 12</h2>
<p>This section describes the steps to run Android 12 VM on the ADL platform</p>
<ul class="simple">
<li>VM Launch
Launch Celadon Android Guest VM</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Launch the Android CIV Guest VM</span>
$ sudo vm-manager -b civ-sriov
</pre></div>
</div>
</div>
<div class="section" id="guest-vm-configuration-options">
<h2>Guest VM Configuration Options</h2>
<div class="section" id="android-12-guest-vm-memory-and-number-of-cpus">
<h3>Android 12 Guest VM Memory and Number of CPUs</h3>
<p>Edit the memory and vcpu sections of the configuration ini file at <code class="docutils literal"><span class="pre">&lt;workspace&gt;/.intel/.civ/civ-sriov.ini.</span></code></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Enable USB Devices in Guest VM</span>
<span class="c1"># [memory]</span>
<span class="nv">size</span><span class="o">=</span>4G

<span class="c1"># [vcpu]</span>
<span class="nv">num</span><span class="o">=</span>4G
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A passthrough device option can only be used once, because a device can be passed through to only one guest VM at a time.
The passthrough is defined in the configuration ini file.</p>
</div>
</div>
<div class="section" id="android-12-guest-vm-usb-device-passthrough">
<h3>Android 12 guest VM USB device passthrough</h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Find the PCI ID of the USB device</span>
$ $ lspci -nn -D <span class="p">|</span> grep USB
        <span class="m">0000</span>:00:14.0 USB controller <span class="o">[</span>0c03<span class="o">]</span>: Intel Corporation Device <span class="o">[</span><span class="m">8086</span>:7ae0<span class="o">]</span> <span class="o">(</span>rev <span class="m">11</span><span class="o">)</span>
        <span class="m">0000</span>:00:14.1 USB controller <span class="o">[</span>0c03<span class="o">]</span>: Intel Corporation Device <span class="o">[</span><span class="m">8086</span>:7ae1<span class="o">]</span> <span class="o">(</span>rev <span class="m">11</span><span class="o">)</span>
        <span class="m">0000</span>:05:00.0 USB controller <span class="o">[</span>0c03<span class="o">]</span>: Intel Corporation Thunderbolt <span class="m">4</span> NHI <span class="o">[</span>Maple Ridge 4C <span class="m">2020</span><span class="o">]</span> <span class="o">[</span><span class="m">8086</span>:1137<span class="o">]</span>
        <span class="m">0000</span>:07:00.0 USB controller <span class="o">[</span>0c03<span class="o">]</span>: Intel Corporation Thunderbolt <span class="m">4</span> USB Controller <span class="o">[</span>Maple Ridge 4C <span class="m">2020</span><span class="o">]</span> <span class="o">[</span><span class="m">8086</span>:1138<span class="o">]</span>

<span class="c1"># Edit the passthrough section of the configuration ini file at /home/&lt;user&gt;/.intel/.civ</span>
<span class="c1"># [passthrough]</span>
<span class="c1"># Specify the PCIe ID of the device for the passthrough to guest, separate them with comma</span>
$ <span class="nv">passthrough_pci</span><span class="o">=</span><span class="m">0000</span>:00:14.0,0000:00:14.1,0000:05:00.0,0000:07:00.0,
</pre></div>
</div>
</div>
<div class="section" id="enable-pcie-wi-fi-adapter-device-in-guest-vm">
<h3>Enable PCIe Wi-Fi Adapter Device in Guest VM</h3>
<p>This section describes steps to enable PCIe</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ lspci -nn -D <span class="p">|</span> grep Wi-Fi
<span class="m">0000</span>:02:00.0 Network controller <span class="o">[</span><span class="m">0280</span><span class="o">]</span>: Intel Corporation Wi-Fi <span class="m">6</span> AX210/AX211/AX411 160MHz <span class="o">[</span><span class="m">8086</span>:2725<span class="o">]</span> <span class="o">(</span>rev 1a<span class="o">)</span>
<span class="c1"># Then edit the passthrough section of the configuration ini file at /home/&lt;user&gt;/.intel/.civ.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A passthrough device option can only be used once, because a device can be passthrough to only 1 guest VM at a time
For Android 12 guest VM, find the PCI ID of the Wi-Fi device</p>
</div>
</div>
<div class="section" id="enable-logging-for-android-12-guest-vm">
<h3>Enable logging for Android 12 Guest VM</h3>
<p>This section describes steps to enable debug logging</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Edit the extra section of the configuration ini file at /home/&lt;user&gt;/.intel/.civ.</span>
<span class="o">[</span>extra<span class="o">]</span>
<span class="nv">cmd</span><span class="o">=</span>-chardev socket,id<span class="o">=</span>ch0,path<span class="o">=</span>/tmp/civ1-console,server<span class="o">=</span>on,wait<span class="o">=</span>off,logfile<span class="o">=</span>/tmp/civ1_serial.log -serial chardev:ch0

<span class="o">[</span>passthrough<span class="o">]</span>
<span class="c1">#specified the PCI id here if you want to passthrough it to guest, separate them with comma</span>
<span class="nv">passthrough_pci</span><span class="o">=</span><span class="m">0000</span>:02:00.0

<span class="c1"># Connect to Android 12 Guest VM console for any debugging</span>
<span class="c1"># Connect to Celadon guest console</span>
$ sudo socat unix-connect:/tmp/civ1-console stdio
</pre></div>
</div>
</div>
<div class="section" id="launch-guest-vm-on-single-display-and-full-screen-mode">
<h3>Launch Guest VM on Single Display and Full Screen Mode</h3>
<p>Edit the extra section of the configuration ini file at /home/&lt;user&gt;/.intel/.civ</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># different according to the use cases.</span>
<span class="o">[</span>extra<span class="o">]</span>
<span class="nv">cmd</span><span class="o">=</span>-full-screen
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The amount of memory and cores allocated might be different according to
each platform.</p>
</div>
</div>
<div class="section" id="shutdown-vms-and-system">
<h3>Shutdown VMs and System</h3>
<p>Shutdown Android VM via Android ADB connection</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Connect via ADB from remote machine via host machine IP</span>
$ adb connect xxx.xxx.xxx.xxx
<span class="c1"># shutdown Android</span>
$ adb reboot -p
</pre></div>
</div>
</div>
</div>
<div class="section" id="acronyms-and-terms">
<h2>Acronyms and terms</h2>
<ul class="simple">
<li>Stable Releases (IoT) - IOTG overlay on top of Celadon</li>
<li>CIV - Celadon in Virtual Machine</li>
<li>ADL: ALDER LAKE</li>
<li>GVT-d : Intel® Graphics Virtualization Technology -g (Intel® GVT-g):
virtual graphics processing unit (vGPU) (multiple VMs to one physical GPU)</li>
<li>SR-IOV: Single Root IO Virtualization</li>
</ul>
</div>
<div class="section" id="helpful-hints-related-documents">
<h2>Helpful hints / related documents</h2>
<ul class="simple">
<li>If you plan to use Celadon in a product, please replace all the test keys
under <code class="docutils literal"><span class="pre">device/intel/build/testkeys/</span></code> with your product key</li>
<li>The release of this project will be signed by test keys; it’s only a
reference for our customer and we are not responsible for this. Customers
should use their own keys to sign their release images</li>
<li>Build Celadon in VM  <a class="reference external" href="https://projectceladon.github.io/celadon-documentation/getting-started/build-source.html">https://projectceladon.github.io/celadon-documentation/getting-started/build-source.html</a></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="android-11.html" class="btn btn-neutral float-right" title="Android 11 Stable Releases IoT" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="feature-delta-iot-a12.html" class="btn btn-neutral" title="Feature Delta Offered by Stable Releases (IoT)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, BSD, MIT, Apache and GPL licenses.
      Last updated on Jan 17, 2023.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>