

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Software Debugging Tips on Celadon &mdash; Documentation for the Celadon Project</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Making the Android* Host Debuggable - ADB for x86 Android Solutions" href="dbc.html" />
    <link rel="prev" title="Enabling USB Audio Class 3.0 audio in Celadon" href="enabling-uac3.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Celadon Project
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started/getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorials.html">Guides and Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="tutorials.html#development">Development</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="mixins.html">Mixins</a></li>
<li class="toctree-l3"><a class="reference internal" href="enabling-uac3.html">Enabling USB Audio Class 3.0 audio in Celadon</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Software Debugging Tips on Celadon</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#debugging-using-gdb">Debugging using gdb</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dbc.html">Making the Android* Host Debuggable - ADB for x86 Android Solutions</a></li>
<li class="toctree-l3"><a class="reference internal" href="widevine-integration.html">Widevine* L3 Integration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="boot-civ-bare-metal.html">Boot CiV on Bare Metal</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#security">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#system-validation">System Validation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Celadon Project</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="tutorials.html">Guides and Tutorials</a> &raquo;</li>
        
      <li>Software Debugging Tips on Celadon</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorials/software-debug-tips.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="software-debugging-tips-on-c">
<span id="software-debug-tips"></span><h1>Software Debugging Tips on Celadon</h1>
<p>In addition the useful tools and techniques documented in the <a class="reference external" href="https://source.android.com/devices/tech/debug">Debugging Native Android Platform Code</a> section on the AOSP website, this article provides additional information to facilitate the software debugging on Celadon devices.</p>
<div class="section" id="debugging-using-gdb">
<h2>Debugging using gdb</h2>
<p>GNU Debugger (<em>gdb</em>) is the most popular debugger for debug C/C++ programs on UNIX systems. You could follow below procedures to tap into a running program, and exercise control over the program to stop execution at a certain point, step through the program one line at a time, and examine variables when problems occur.</p>
<ol class="arabic">
<li><p class="first">If your development host does not have <em>gdb</em> installed, enter the following commands to install <em>gdb</em> tool on your Ubuntu development workstation:</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo apt-get update
$ sudo apt-get install gdb
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">A <a class="reference external" href="https://raw.githubusercontent.com/projectceladon/celadon-documentation/master/blob/celadon_gdb.sh">celadon_gdb.sh</a> script is developed to establish a connection from the local <em>gdb</em> program to the <em>gdbserver</em> program running on the Celadon target device. Since the debugging process requires the program symbol tables and some shared libraries in the Celadon build tree, you need to download and save the script in the top-most Celadon source directory before initializing the build variables and selecting the Celadon build target.</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> celadon
$ curl -O https://raw.githubusercontent.com/projectceladon/celadon-documentation/master/blob/celadon_gdb.sh
$ chmod +x celadon_gdb.sh
$ <span class="nb">source</span> build/envsetup.sh
$ lunch celadon-userdebug
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Reference the <a class="reference internal" href="../getting-started/build-source.html#build-from-source"><span class="std std-ref">Build Celadon From Source</span></a> section in the Getting Started Guide to build the Celadon installer image.</p>
</li>
<li><p class="first">After booting up the Intel NUC, set up an <em>adb</em> connection from the development host to the Intel NUC over Ethernet with the following commands prior the debugging process:</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre><span></span>$ adb kill-server
# Replace the following IP addresses with yours
$ adb connect 192.168.1.107
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
connected to 192.168.1.107:5555
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Restart the <em>adb</em> daemon in privileged mode and re-connects to the Intel NUC:</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre><span></span>$ adb root
restarting adbd as root
$ adb connect 192.168.1.107
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
connected to 192.168.1.107:5555
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Letâ€™s say you want to debug the wireless supplicant daemon <em>wpa_supplicant</em>, you can invoke the <strong>celadon_gdb.sh</strong> script with the following command to tap into the running <em>WPA_supplicant</em> daemon, and start debugging the program.</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre><span></span>$ ./celadon_gdb.sh  wpa_supplicant
3207
Attached; pid = 3207
Listening on port 6000

GNU gdb (Ubuntu 7.11.1-0ubuntu1~16.5) 7.11.1
Copyright (C) 2016 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-linux-gnu&quot;.
Type &quot;show configuration&quot; for configuration details.
For bug reporting instructions, please see:
&lt;http://www.gnu.org/software/gdb/bugs/&gt;.
Find the GDB manual and other documentation resources online at:
&lt;http://www.gnu.org/software/gdb/documentation/&gt;.
For help, type &quot;help&quot;.
Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;.
Remote debugging from host 127.0.0.1
/usr/local/google/buildbot/src/android/master-ndk/toolchain/gdb/gdb-7.11/gdb/gdbserver/regcache.c:264: A problem internal to GDBserver has been detected.
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dbc.html" class="btn btn-neutral float-right" title="Making the Android* Host Debuggable - ADB for x86 Android Solutions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="enabling-uac3.html" class="btn btn-neutral" title="Enabling USB Audio Class 3.0 audio in Celadon" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, BSD, MIT, Apache and GPL licenses.
      Last updated on Nov 22, 2021.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>